name: gitops-cp4d-deployer
type: gitops
description: >-
  Module to populate a gitops repo with the resources to provision
  IBM Cloud Pak for Data using the Cloud Pak Deployer
tags:
  - tools
  - gitops 
versions: 
  - platforms:
      - kubernetes
      - ocp3
      - ocp4
    providers:
      - name: gitops
        source: cloud-native-toolkit/gitops
    dependencies:
      - id: gitops
        refs:
          - source: github.com/cloud-native-toolkit/terraform-tools-gitops.git
            version: '>= 1.1.0'
      - id: namespace
        refs:
          - source: github.com/cloud-native-toolkit/terraform-gitops-namespace.git
            version: '>= 1.0.0'
    variables:
      - name: gitops_config
        moduleRef:
          id: gitops
          output: gitops_config
      - name: git_credentials
        moduleRef:
          id: gitops
          output: git_credentials
      - name: server_name
        moduleRef:
          id: gitops
          output: server_name
      - name: namespace
        moduleRef:
          id: namespace
          output: name
      - name: kubeseal_cert
        moduleRef:
          id: gitops
          output: sealed_secrets_cert
      - name: deployer_storage_class
        type: string
        description: Storage class to be used by the cloud pak deployer
        default: ocs-storagecluster-cephfs
      - name: instance_namespace
        type: string
        description: "The namespace where the cloud pak deployer instance will be deployed"
        default: cpd-instance
      - name: cluster_name
        type: string
        description: "The cluster name where the cloud pak deployer will be deployed"
      - name: cluster_ingress
        type: string
        description: "The ingress subdomain for the cluster"
      - name: cpd_version
        type: string
        description: "The CP4D version to deploy."
        default: "4.6.0"
      - name: entitlement_key
        type: string
        description: "The Cloud Pak entitlement key"

      - name: install_scheduler
        type: bool
        description: "Install scheduler cartridge"
        default: false
      - name: install_analyticsengine
        type: bool
        description: "Install analyticsengine cartridge"
        default: false
      - name: install_bigsql
        type: bool
        description: "Install bigsql cartridge"
        default: false
      - name: install_ca
        type: bool
        description: "Install ca cartridge"
        default: false
      - name: install_cde
        type: bool
        description: "Install cde cartridge"
        default: false
      - name: install_datagate
        type: bool
        description: "Install datagate cartridge"
        default: false
      - name: install_datastage-ent-plus
        type: bool
        description: "Install datastage-ent-plus cartridge"
        default: false
      - name: install_db2
        type: bool
        description: "Install db2 cartridge"
        default: false
      - name: install_db2u
        type: bool
        description: "Install db2u cartridge"
        default: false
      - name: install_db2wh
        type: bool
        description: "Install db2wh cartridge"
        default: false
      - name: install_dmc
        type: bool
        description: "Install dmc cartridge"
        default: false
      - name: install_dods
        type: bool
        description: "Install dods cartridge"
        default: false
      - name: install_dp
        type: bool
        description: "Install dp cartridge"
        default: false
      - name: install_dv
        type: bool
        description: "Install dv cartridge"
        default: false
      - name: install_hadoop
        type: bool
        description: "Install hadoop cartridge"
        default: false
      - name: install_mdm
        type: bool
        description: "Install mdm cartridge"
        default: false
      - name: install_openpages
        type: bool
        description: "Install openpages cartridge"
        default: false
      - name: install_planning-analytics
        type: bool
        description: "Install planning-analytics cartridge"
        default: false
      - name: install_rstudio
        type: bool
        description: "Install rstudio cartridge"
        default: false
      - name: install_spss
        type: bool
        description: "Install spss cartridge"
        default: false
      - name: install_voice-gateway
        type: bool
        description: "Install voice-gateway cartridge"
        default: false
      - name: install_watson-assistant
        type: bool
        description: "Install watson-assistant cartridge"
        default: false
      - name: install_watson-discovery
        type: bool
        description: "Install watson-discovery cartridge"
        default: false
      - name: install_watson-ks
        type: bool
        description: "Install watson-ks cartridge"
        default: false
      - name: install_watson-openscale
        type: bool
        description: "Install watson-openscale cartridge"
        default: false
      - name: install_watson-speech
        type: bool
        description: "Install watson-speech cartridge"
        default: false
      - name: install_wkc
        type: bool
        description: "Install wkc cartridge"
        default: false
      - name: install_wml
        type: bool
        description: "Install wml cartridge"
        default: false
      - name: install_wml-accelerator
        type: bool
        description: "Install wml-accelerator cartridge"
        default: false
      - name: install_wsl
        type: bool
        description: "Install wsl cartridge"
        default: false
    version: v0.0.2
    outputs:
      - name: name
        description: The name of the module
      - name: branch
        description: The branch where the module config has been placed
      - name: namespace
        description: The namespace where the module will be deployed
      - name: server_name
        description: The server where the module will be deployed
      - name: layer
        description: The layer where the module is deployed
      - name: type
        description: The type of module where the module is deployed
id: github.com/cloud-native-toolkit/terraform-gitops-cp4d-deployer
